delimiter $$
create PROCEDURE RendicionDeHoras(
    IN NumeroProyecto INT,
    IN Legajo INT,
    IN Horas INT
)

BEGIN
    UPDATE participaciones 
    SET participaciones.AsignacionDeHoras = participaciones.AsignacionDeHoras + horas
    WHERE participaciones.NumeroProyecto = NumeroProyecto AND participaciones.Legajo = Legajo;

end;
$$


delimiter $$
create PROCEDURE RendicionDeHoras_2(
    IN NumeroProyecto INT,
    IN Legajo INT,
    IN Horas INT
)

BEGIN
    UPDATE participaciones 
    SET participaciones.AsignacionDeHoras = participaciones.AsignacionDeHoras + horas
    WHERE participaciones.NumeroProyecto = NumeroProyecto AND participaciones.Legajo = Legajo;
    
    INSERT INTO HorasCargadas (NumeroProyecto, Legajo, idRol, HorasRealizadas, FechaCarga)
    SELECT NumeroProyecto, Legajo, participaciones.idRol, horas, NOW()
    FROM participaciones
	 WHERE participaciones.NumeroProyecto = NumeroProyecto AND participaciones.Legajo = Legajo;

end;
$$
